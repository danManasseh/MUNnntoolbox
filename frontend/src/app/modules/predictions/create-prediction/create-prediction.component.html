<div class="form-container">
  <button mat-icon-button class="close-button" (click)="closeForm()">
    <mat-icon>close</mat-icon>
  </button>
  <h2 class="custom-dialog-title">Create New Prediction</h2>
  <form (ngSubmit)="submitForm()" [formGroup]="predictionForm">
    <div class="form-group">
      <mat-form-field>
        <label for="name">Name:</label>
        <input matInput type="text" id="name" name="name" class="form-control" formControlName="name" required>
      </mat-form-field>
    </div>
    <div class="form-group">
      <mat-form-field>
        <label for="nn_model_id">Model Training:</label>
        <mat-select id="nn_model_id" name="nn_model_id" class="form-control" formControlName="nn_model_id" required (selectionChange)="setMaxAllowedColumns(predictionForm.get('nn_model_id')?.value)">
          <mat-option *ngFor="let option of models" [value]="option.id">{{ option.name }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="form-group">
      <mat-form-field>
        <label for="dataset_id">Dataset Name:</label>
        <mat-select id="dataset_id" name="dataset_id" class="form-control" formControlName="dataset_id" required (selectionChange)="setColumns(predictionForm.get('dataset_id')?.value)">
          <mat-option *ngFor="let option of datasets" [value]="option.id">{{ option.name }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="form-group">
      <mat-form-field>
        <label for="columns">Input:</label>
        <mat-select multiple id="columns" name="columns" class="form-control" formControlName="columns" required >
          <mat-option *ngFor="let option of columns" [value]="option">{{ option}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="error-container" *ngIf="predictionForm.get('columns')?.hasError('totalSelectedColumnsId') && predictionForm.get('columns')?.dirty">
      <mat-error>{{ getMaxErrorMessage(predictionForm.get('nn_model_id')?.value) }}</mat-error>
    </div>
    <div class="form-actions">
      <button mat-raised-button color="primary" type="submit">Submit</button>
    </div>
  </form>
</div>
